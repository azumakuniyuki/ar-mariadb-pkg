---
#  __  __            _       ____  ____   __      _       __     ___            _        
# |  \/  | __ _ _ __(_) __ _|  _ \| __ ) / /_ __ | | ____ \ \   / / |_ __ _ ___| | _____ 
# | |\/| |/ _` | '__| |/ _` | | | |  _ \| || '_ \| |/ / _` | | / /| __/ _` / __| |/ / __|
# | |  | | (_| | |  | | (_| | |_| | |_) | || |_) |   < (_| | |/ / | || (_| \__ \   <\__ \
# |_|  |_|\__,_|_|  |_|\__,_|____/|____/| || .__/|_|\_\__, | /_/   \__\__,_|___/_|\_\___/
#                                        \_\_|        |___/_/                            
# make-config
- name: make-config | Deploy /etc/my.cnf
  notify: Restart MariaDB
  template:
    src:  "etc/my.cnf.j2"
    dest: "/etc/my.cnf"
    mode: "0644"

- name: make-config | Deploy each config file in /etc/my.cnf.d
  notify: Restart MariaDB
  template:
    src:  "etc/my.cnf.d/{{ item }}.j2"
    dest: "{{ mariadb.configroot }}/{{ item }}"
    mode: "0644"
  with_items:
    - "client.cnf"
    - "mysql-clients.cnf"
    - "server.cnf"

